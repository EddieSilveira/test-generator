# ⚡ Test Generator

An AI-powered tool that automatically generates unit and integration tests for your code. Paste any function or module, select your preferred testing framework, and get complete test suites with edge cases, mocks, and inline explanations — all in seconds.

Built with [Next.js](https://nextjs.org/), [Vercel AI SDK](https://sdk.vercel.ai/), and [Claude](https://www.anthropic.com/) as the AI provider.

## Features

- **Multi-framework support** — Generate tests for Vitest, Jest, or React Testing Library
- **Streaming responses** — Watch tests being generated in real time
- **Edge cases & mocks** — The AI automatically includes edge cases and mocks where relevant
- **Copy & Download** — Copy the generated tests to clipboard or download them as `.test.ts` / `.spec.tsx` files
- **Regenerate** — Not happy with the output? Regenerate with one click
- **Example snippets** — Built-in code examples to get started quickly

## Tech Stack

| Technology | Role |
|---|---|
| Next.js 15 | Framework (App Router) |
| Vercel AI SDK | AI integration & streaming |
| Claude (via AI Gateway) | Language model |
| Tailwind CSS | Styling |
| Lucide React | Icons |
| TypeScript | Type safety |

## Getting Started

### Prerequisites

- [Node.js](https://nodejs.org/) 18 or higher
- [pnpm](https://pnpm.io/) installed globally

### 1. Clone the repository

```bash
git clone https://github.com/EddieSilveira/test-generator.git
cd test-generator
```

### 2. Install dependencies

```bash
pnpm install
```

### 3. Configure environment variables

This project uses the **Vercel AI Gateway**, so no `.env.local` file is needed if you're deploying through Vercel. For local development, make sure you have a Vercel account and have linked your project:

```bash
pnpm dlx vercel link
pnpm dlx vercel env pull .env.local
```

> **Note:** The AI Gateway requires a valid credit card on your Vercel account to unlock free credits. No charges apply within the free tier limits.

### 4. Run the development server

```bash
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## How It Works

1. Paste your code into the left panel (or select one of the built-in examples)
2. Choose your testing framework using the buttons at the top
3. Click **Generate Tests**
4. The AI streams the generated test file in real time on the right panel
5. Copy or download the result

The API route (`/api/chat`) sends your code and the selected framework to Claude via the Vercel AI SDK's `streamText`, with a system prompt that enforces test-only output with comments and edge cases.

## Project Structure

```
├── app/
│   ├── api/
│   │   └── chat/
│   │       └── route.ts          # API route — streams tests from Claude
│   ├── layout.tsx
│   └── page.tsx                  # Main UI — input, output, controls
├── .env.local                    # (generated by Vercel CLI)
├── package.json
├── tailwind.config.ts
└── tsconfig.json
```

## Switching AI Providers

One of the advantages of using the Vercel AI SDK is how easy it is to swap providers. If you want to use the Anthropic API directly instead of the AI Gateway, install the provider and update `route.ts`:

```bash
pnpm add @ai-sdk/anthropic
```

```typescript
import { anthropic } from '@ai-sdk/anthropic';
import { streamText, UIMessage, convertToModelMessages } from 'ai';

export async function POST(req: Request) {
  const { messages }: { messages: UIMessage[] } = await req.json();

  const result = streamText({
    model: anthropic('claude-sonnet-4-20250514'),
    system: `You are a testing expert. Your rules:
      - Generate ONLY test code, no explanations outside the code
      - Use comments inside the code to explain each test
      - Always include edge cases
      - Generate mocks when necessary
      - Return code inside markdown code blocks
      - If the user doesn't specify a framework, use Vitest by default`,
    messages: await convertToModelMessages(messages),
  });

  return result.toUIMessageStreamResponse();
}
```

Then add your key to `.env.local`:

```bash
ANTHROPIC_API_KEY=your_key_here
```

The rest of the application remains unchanged.

## Deployment

This project is designed to be deployed on [Vercel](https://vercel.com/) with zero configuration:

```bash
pnpm dlx vercel deploy
```

## License

MIT
